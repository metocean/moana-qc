FROM metocean/ops-qc:v0.4.7

ADD . $SOURCE/moana-qc

ARG GIT_TOKEN

RUN pip install -r $SOURCE/moana-qc/requirements/default.txt &&\
    pip install -I -r $SOURCE/moana-qc/requirements/opslibs.txt &&\
    pip install -r $SOURCE/moana-qc/requirements/tests.txt &&\
    pip install $SOURCE/moana-qc &&\
    sudo pip uninstall -y cloudpickle &&\
    sudo pip uninstall -y ops-mds &&\
    sudo pip uninstall -y snowflake-sqlalchemy &&\
    pip install pytz==2023.3 &&\
    pip install SQLAlchemy==1.1.18


CMD ["/bin/bash"]
